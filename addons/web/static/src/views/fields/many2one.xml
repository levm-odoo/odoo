<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.KanbanMany2OneAssignPopover">
        <Many2One t-props="many2oneProps">
        </Many2One>
    </t>

    <t t-name="web.KanbanMany2One">
        <div class="o-kanban-many2one">
            <t t-if="value">
                <t t-slot="decoration"/>
            </t>
            <t t-elif="!props.readonly">
                <a class="o_quick_assign btn-link d-flex align-items-center text-dark" href="#" role="button" tabIndex="-1" aria-label="Assign" data-tooltip="Assign" t-on-click.stop.prevent="(e) => this.openAssignPopover(e.currentTarget)">
                    <i class="fa fa-user-plus"/>
                </a>
            </t>
        </div>
    </t>

    <t t-name="web.Many2One.link.content">
        <span t-esc="displayName"/>
        <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
            <br/>
            <span t-esc="extraLine"/>
        </t>
    </t>

    <t t-name="web.Many2One.link">
        <t t-if="value">
            <t t-if="props.canOpen">
                <a class="o_form_uri" t-att-class="props.linkCssClass" t-on-click.prevent.stop="() => this.openRecordInAction()">
                    <t t-call="web.Many2One.link.content"/>
                </a>
            </t>
            <t t-else="">
                <t t-call="web.Many2One.link.content"/>
            </t>
        </t>
    </t>

    <t t-name="web.Many2One.combobox">
        <div class="o-many2one-selection o_field_many2one_selection" t-ref="root">
            <AutoComplete t-props="autoCompleteProps">
                <t t-set-slot="recordItem" t-slot-scope="recordItemScope">
                    <t t-if="props.slots?.item">
                        <t t-slot="item" record="recordItemScope.recordItem.record"/>
                    </t>
                    <t t-else="">
                        <t t-esc="recordItemScope.recordItem.label"/>
                    </t>
                </t>
            </AutoComplete>
            <t t-if="hasLinkButton">
                <button class="o_external_button btn btn-link text-action px-1" draggable="false" tabindex="-1" type="button" aria-label="Internal link" data-tooltip="Internal link" t-custom-click="(_, isMiddleClick) => this.openRecord(isMiddleClick)">
                    <i class="oi" t-att-class="env.inDialog ? 'oi-launch' : 'oi-arrow-right'"/>
                </button>
            </t>
            <t t-if="hasBarcodeButton">
                <button class="btn ms-3 o_barcode" draggable="false" tabindex="-1" type="button" aria-label="Scan barcode" data-tooltip="Scan barcode" t-on-click="() => this.openBarcodeScanner()"/>
            </t>
        </div>
        <t t-set="lines" t-value="extraLines"/>
        <t t-if="lines.length">
            <div class="o-many2one-extra o_field_many2one_extra">
                <t t-foreach="lines" t-as="line" t-key="line_index">
                    <br t-if="!line_first"/>
                    <span t-esc="line"/>
                </t>
            </div>
        </t>
    </t>

    <t t-name="web.Many2One">
        <div class="o-many2one d-flex align-items-center gap-1" t-att-class="props.cssClass">
            <t t-slot="decoration" record="value"/>
            <t t-if="props.readonly">
                <t t-call="web.Many2One.link"/>
            </t>
            <t t-else="">
                <t t-call="web.Many2One.combobox"/>
            </t>
        </div>
    </t>

</templates>
