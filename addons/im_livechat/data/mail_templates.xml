<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <template id="livechat_email_template">
<t t-set="top" t-value="'border-top: thin solid #dee2e6;'" />
<t t-set="bottom" t-value="'border-bottom: thin solid #dee2e6;'" />
<t t-set="right" t-value="'border-right: thin solid #dee2e6;'" />
<t t-set="left" t-value="'border-left: thin solid #dee2e6;'" />
<div style="font-size: 13px; margin: 0 50px 0 50px">
<div style="padding: 10px 0;">
    <span>Hello,</span><br />Here's a copy of your conversation with
    <!-- sudo: res.users - visitor can access the name of the operator -->
    <span t-esc="channel.livechat_operator_id.sudo().user_livechat_username or channel.livechat_operator_id.sudo().name"/>, on the
    <span t-field="channel.create_date"/>
</div>
<table cellspacing="0" cellpadding="0" style="width:100%; border-collapse: collapse;">
<t t-foreach="channel.message_ids.sorted(key=lambda m: m.date)" t-as="message" >
    <!-- sudo: res.partner - visitor can access authors of the messages sent on their channel -->
    <t t-set="author_name"><t t-if="message.author_id" t-esc="message.author_id.sudo().user_livechat_username or message.author_id.sudo().name"></t><t t-else="">You</t></t>
    <tr>
        <td valign="top" align="center" rowspan="2" t-att-style="'width: 70px;' + top + bottom + left">
            <t t-if="message.author_avatar">
                <img  t-attf-alt="{{author_name}}" style="width: 64px; height: 64px; object-fit: cover;" t-attf-src="data:image/png;base64,{{message.author_avatar}}"/>
            </t>
            <t t-else="">
                <img  t-attf-alt="{{author_name}}" style="width: 64px; height: 64px; object-fit: cover;" src="/mail/static/src/img/smiley/avatar.jpg"/>
            </t>
        </td>
        <td t-att-style="'padding-left: 5px; margin: 0px;' + top">
            <strong t-esc="author_name"/>
        </td>
        <td  t-att-style="'font-size: 13px; padding: 5px;' + top + right" align="right"><span t-field="message.date"/></td>
    </tr>
    <tr>
        <td valign="top" colspan="2" t-att-style="'padding-left: 5px;' + bottom + right">
            <span t-field="message.body" style="font-size: 13px;"/>
        </td>
    </tr>
</t>
</table>
<div style="font-size: 13px; padding: 30px 0;">
    <span>Best regards,</span><br /><br />
    <span t-field="company.name"/>
</div>
</div>
        </template>
    </data>
</odoo>
