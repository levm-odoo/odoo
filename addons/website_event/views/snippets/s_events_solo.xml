<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

<template id="s_events_solo" name="Solo Events">
    <t t-call="website.s_solo_dynamic_snippet_template">
        <t t-set="snippet_name" t-value="'s_event_solo'"/>
        <t t-set="snippet_classes" t-value="'s_event_upcoming_snippet s_event_event_banner'"/>
        <t t-set="custom_template_data" t-valuef='{"events_event_time_active":true}'/>
        <t t-call="website_event.s_event_upcoming_snippet_preview_data"/>
    </t>
</template>

<!--TEMPLATES-->

<template id="dynamic_filter_template_event_event_banner" name="Banner Layout" priority="5">
    <div t-foreach="records" t-as="data" class="s_events_event w-100" data-column-classes="col-12 col-lg-12">
        <t t-set="record" t-value="data['_record']._set_tz_context()"/>
        <div class="s_events_event_cover o_half_screen_height o_cc o_cc5 position-relative d-flex flex-column flex-lg-row align-items-center h-100 overflow-hidden"
           t-att-href="data['call_to_action_url']">
            <t t-call="website.record_cover">
                <t t-set="_record" t-value="record"/>
                <t t-set="_resize_height" t-value="512"/>
                <t t-set="_resize_width" t-value="512"/>
                <t t-set="use_filters" t-value="True"/>
                <t t-set="additionnal_classes" t-value="'position-absolute w-100 h-100'"/>
            </t>
            <div class="z-0 col-12 col-lg-6 px-3 px-lg-0 pt-4 pt-lg-0 ps-lg-5">
                <div t-if="is_sample" class="h5 o_ribbon_right bg-primary text-uppercase">Sample</div>
                <h1 t-field="record.name"/>
                <p class="lead" t-field="record.subtitle"/>
            </div>
            <div class="z-0 col-12 col-lg-4 d-flex flex-column justify-content-center offset-lg-2 pb-4 pb-lg-0 pe-lg-5">
                <div t-if="is_sample" class="h5 o_ribbon_right bg-primary text-uppercase">Sample</div>
                <div class="s_card card o_cc o_cc1 ms-3 ms-lg-0 me-auto shadow" data-snippet="s_card" data-name="Card" data-vxml="001" style="border-width: 0px !important; max-width: 50%">
                    <div class="card-body p-4">
                        <time t-att-datetime="record.date_begin">
                            <span class="fw-bold">Date</span>
                            <p t-out="record.date_begin"
                                t-options="{'widget': 'datetime', 'date_only': 'true', 'format': 'long', 'tz_name': record.date_tz}"/>
                            <span t-if="events_event_time_active" class="s_events_event_time">
                                <span class="fw-bold">Time</span>
                                <p><i class="fa fa-clock-o me-1" role="img"/><span t-out="record.date_begin" t-options="{'widget': 'datetime', 'time_only': 'true', 'format': 'short', 'tz_name': record.date_tz}"/></p>
                                <span class="fw-bold">Location</span>
                                <p><i class="fa fa-map-marker me-1" role="img"/><span t-out="record.date_tz.replace('_', ' ')"/></p>
                            </span>
                        </time>
                        <a t-att-href="cta_btn_href" class="btn btn-primary w-100"><t t-out="cta_btn_text">Register<i class="fa fa-long-arrow-right ms-2" role="img"/></t></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<!--SNIPPET OPTIONS -->

<template id="s_events_options" inherit_id="website.snippet_options">
    <xpath expr="." position="inside">
        <t t-call="website_event.s_dynamic_snippet_options_template">
            <t t-set="snippet_name" t-value="'event_upcoming_snippet'"/>
            <t t-set="snippet_selector" t-value="'.s_event_upcoming_snippet'"/>
        </t>
    </xpath>
</template>

<template id="s_dynamic_snippet_options_template" inherit_id="website.s_dynamic_snippet_options_template">
    <xpath expr="//we-select[@data-name='filter_opt']" position="after">
        <we-many2many t-if="snippet_name == 'event_upcoming_snippet'"
                      string="Event Tags"
                      data-name="event_tag_opt"
                      data-model="event.tag"
                      data-fakem2m="true"
                      data-domain='[["category_id.website_published", "=", true], ["color", "not in", ["0", false]]]'
                      data-limit="10"
                      data-attribute-name="filterByTagIds"
                      data-fields="[&quot;category_id&quot;]"
                      data-select-data-attribute=""
                      data-no-preview="true"/>
    </xpath>
    <xpath expr="//we-select[@data-name='template_opt']" position="after">
        <we-checkbox t-if="snippet_name == 'event_upcoming_snippet'"
            data-name="time_opt"
            string="Show time"
            data-no-preview="true"
            data-customize-template-key="events_event_time_active"
            data-customize-template-values="false|true"/>
    </xpath>
</template>

<!--ASSETS-->

<record id="website_event.s_events_000_scss" model="ir.asset">
    <field name="name">Event 000 SCSS</field>
    <field name="bundle">web.assets_frontend</field>
    <field name="path">website_event/static/src/snippets/s_events/000.scss</field>
</record>

<record id="website_event.s_events_000_js" model="ir.asset">
    <field name="name">Event 000 JS</field>
    <field name="bundle">web.assets_frontend</field>
    <field name="path">website_event/static/src/snippets/s_events/000.js</field>
</record>

</odoo>
