<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template
        id="website_sale.s_mega_menu_multi_menus"
        name="eCommerce: Multi-Menus"
        groups="base.group_user"
    >
        <section class="s_mega_menu_multi_menus py-4 o_colored_level o_cc o_cc1">
            <div class="container">
                <div class="row">
                    <t
                        t-set="categories"
                        t-value="request.env['product.public.category'].search([
                            ('parent_id', '=', False),
                            ('product_tmpl_ids.is_published', '=', True),
                        ], limit=4)"
                    />
                    <t t-foreach="categories" t-as="category">
                        <div class="col-12 col-sm py-2 text-center">
                            <h4>
                                <a
                                    t-att-href="'/shop/category/%s' % category.id"
                                    class="nav-link p-0 text-black"
                                    t-esc="category.name"
                                />
                            </h4>
                            <nav class="nav flex-column">
                                <t t-foreach="category.child_id.filter(lambda c: c.product_tmpl_ids.is_published)"
                                   t-as="sub_category">
                                    <a
                                        t-if="any(sub_category.product_tmpl_ids.mapped('is_published'))"
                                        t-att-href="'/shop/category/%s' % sub_category.id"
                                        class="nav-link"
                                        t-esc="sub_category.name"
                                    />
                                </t>
                            </nav>
                        </div>
                    </t>
                </div>
            </div>
        </section>
    </template>

</odoo>
